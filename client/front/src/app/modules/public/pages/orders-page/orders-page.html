<div class="orders-page">
  <div class="container">
    <div class="page-header">
      <h1>My Orders</h1>
      <p>Track and manage your orders</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <div class="loading-spinner"></div>
      <p>Loading your orders...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="error-state">
      <p>{{ error }}</p>
      <button (click)="loadOrders()" class="retry-btn">Try Again</button>
    </div>

    <!-- Orders List -->
    <div *ngIf="!isLoading && !error" class="orders-content">
      <div *ngIf="orders.length === 0" class="no-orders">
        <div class="no-orders-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <path d="M16 11V7a4 4 0 0 0-8 0v4M5 9h14l1 12H4L5 9z"/>
          </svg>
        </div>
        <h3>No orders yet</h3>
        <p>You haven't placed any orders yet. Start shopping to see your orders here.</p>
        <a routerLink="/products" class="shop-btn">Start Shopping</a>
      </div>

      <div *ngIf="orders.length > 0" class="orders-list">
        <div *ngFor="let order of orders" class="order-card">
          <div class="order-header">
            <div class="order-info">
              <h3>Order #{{ order._id }}</h3>
              <p class="order-date">Placed on {{ formatDate(order.createdAt) }}</p>
            </div>
            <div class="order-status">
              <span [class]="getOrderStatusClass(order.status)">{{ order.status }}</span>
            </div>
          </div>

          <div class="order-items">
            <div *ngFor="let item of order.items" class="order-item">
              <img [src]="getItemImageUrl(item)" [alt]="item.title" class="item-image">
              <div class="item-details">
                <h4>{{ item.title }}</h4>
                <p>Quantity: {{ item.quantity }}</p>
              </div>
              <div class="item-price">
                {{ formatPrice(item.price * item.quantity) }}
              </div>
            </div>
          </div>

          <div class="order-footer">
            <div class="order-total">
              <strong>Total: {{ formatPrice(calculateOrderTotal(order)) }}</strong>
            </div>
            <div class="order-actions">
              <button class="action-btn view-btn">View Details</button>
              <button *ngIf="order.status === 'delivered'" class="action-btn reorder-btn">Reorder</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
